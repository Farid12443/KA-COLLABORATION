<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/login.css">
  <title>Document</title>
</head>

<body>
  <!-- navbar -->
  <nav class="navbar">
    <div class="nav-left">
      <img src="images/Icon.png" alt="Logo" class="logo" />
    </div>
    <!-- <div class="nav-right">
      <div class="search-section">
        <form action="" class="search">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input type="text" placeholder="Search for anything..." />
        </form>
      </div>
      <i class="fa-regular fa-bell bell"></i>
      <div class="profile">
        <div class="profile-info">
          <p class="name">Anima Agrawal</p>
          <span class="location">U.P, India</span>
        </div>
        <img src="images/profil.png" alt="Profile" class="profile-img" />
      </div>
    </div> -->
  </nav>
  <div class="content-all">
    <div class="image">
      <img src="images/image-login.png" alt="" class="image">
    </div>
    <div class="all-item-content">
      <h1 class="h1">Welcome back, Yash</h1>
      <h3>Welcome back! Please enter your details.</h3>
      <div class="erorMassage" id="erorMassage"></div>
      <form action="" class="input-style" id="loginForm">
        <input placeholder="email@gmail.com" type="email" class="input" id="email">
        <input placeholder="add password" type="password" class="input" id="password">
        <div class="checkbox-terms">
          <div class="checkbox-terms2">
            <input type="checkbox">
            <p>terms & Conditions</p>
          </div>
          <p>Forgot <a href="">password</a></p>
        </div>
        <button class="button">Log in</button>
        <p class="bottem-crate-akun">Donâ€™t have an account? <a href="">Sing up for free</a></p>
      </form>
    </div>
  </div>

  <script>
    const loginForm = document.getElementById('loginForm');
    const erorMassage = document.getElementById('erorMassage');

    loginForm.addEventListener('submit', (e) => {

      e.preventDefault();

      //mengambil user
      const users = JSON.parse(localStorage.getItem('users') || '[]');

      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const namaLengkap = users.find(u => {
        if (u.email === email) {
          return u;
        }
      });

      console.log({
        'Email': email,
        'password': password
      })

      if (!users.find(u => u.email === email)) {
        erorMassage.textContent = 'Email belum terdaftar!';
        erorMassage.classlist.remove('hidden');
        return;
      }

      if (!users.find(u => u.password === password)) {
        erorMassage.textContent = 'Password yang anda masukan salah!';
        erorMassage.classlist.remove('hidden');
        return;
      }

      //autologin
      localStorage.setItem('currentUser', JSON.stringify({ "nama": namaLengkap.namaLengkap, email }));

      window.location.href = 'index.html';
    });
  </script>

</body>

</html>